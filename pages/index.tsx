import type { GetStaticProps } from 'next'
import Head from 'next/head'
import Hero from './components/Hero'
import { Livvic } from 'next/font/google'
import Header from './components/Header'
import AboutMe from './components/AboutMe'
import ContactMe from './components/ContactMe'
import Projects from './components/Projects'
import { About, Contact, HeaderInfo, PageInfo, Project } from '@/typings'
import { fetchPageInfo } from '@/utils/fetchPageInfo'
import { fetchAbout } from '@/utils/fetchAbout'
import { fetchProjects } from '@/utils/fetchProjects'
import { fetchContact } from '@/utils/fetchContact'
import { fetchHeader } from '@/utils/fetchHeader'

const livvic = Livvic({
  subsets: ['latin'],
  weight: ['500'],
  style: 'normal',
})

type Props = {
  header: HeaderInfo
  pageInfo: PageInfo
  about: About
  projects: Project[]
  contact: Contact
}

const Home = ({ header, pageInfo, about, contact, projects }: Props) => {
  return (
    <div className="scroll-smooth h-screen snap-y snap-mandatory">
      <Head>
        <title>Gonzalo Vidal - Portfolio</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Header header={header} />
      <section
        id="hero"
        className={`${livvic.className} font-sans flex items-center bg-[#f6f3ee] snap-start `}
      >
        <Hero pageInfo={pageInfo} />
      </section>
      <section
        id="about"
        className={`${livvic.className} font-sans flex items-center bg-[#f6f3ee] snap-start `}
      >
        <AboutMe about={about} />
      </section>
      <section
        id="projects"
        className={`${livvic.className} font-sans flex items-center bg-[#f6f3ee] snap-center `}
      >
        <Projects projects={projects} />
      </section>
      <section
        id="contact"
        className={`${livvic.className} font-sans flex items-center bg-[#f6f3ee] snap-center relative before:absolute before:h-10 before:top-0 before:left-0 before:right-0 before:shadow-shading`}
      >
        <ContactMe contact={contact} />
      </section>
    </div>
  )
}

export default Home

export const getStaticProps: GetStaticProps<Props> = async () => {
  const header: HeaderInfo = await fetchHeader()
  const pageInfo: PageInfo = await fetchPageInfo()
  const about: About = await fetchAbout()
  const projects: Project[] = await fetchProjects()
  const contact: Contact = await fetchContact()
  return {
    props: {
      header,
      pageInfo,
      about,
      projects,
      contact,
    },
    revalidate: 10,
  }
}
